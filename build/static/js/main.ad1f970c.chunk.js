(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{111:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(12),r=a.n(o),l=a(25),s=a(28),c=a(29),m=a(37),u=a(30),d=a(14),g=a(38),p=a(115),h=a(59),v=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).renderRating=function(){for(var e=[],t=function(t){e.push(i.a.createElement("div",{className:"rating-star",style:a.starStyle(t),label:(t+1).toString(),key:t,type:"radio",id:"custom-inline-radio-"+(t+1).toString(),onClick:function(){a.onRatingChange(t)}},"\u2605"))},n=0;n<5;n++)t(n);return e},a.state={ratings:[0,0,0,0,0],comment:"No comment",isRating:!1,additionalRating:""},a.onRatingChange=a.onRatingChange.bind(Object(d.a)(a)),a.onSelectChange=a.onSelectChange.bind(Object(d.a)(a)),a.onAddRatingClick=a.onAddRatingClick.bind(Object(d.a)(a)),a.onAddRatingChange=a.onAddRatingChange.bind(Object(d.a)(a)),a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"starStyle",value:function(e){return{display:"inline",fontSize:40,margin:5,cursor:"pointer",color:0==this.state.ratings[e]?"white":"#f2c213",textShadow:"0px 1px black, 0px -1px black, 1px 0px black, -1px 0px black"}}},{key:"onRatingChange",value:function(e){var t=this.state.ratings;if(t[e])for(var a=e+1;a<t.length;a++)t[a]=!1;else for(var n=0;n<e+1;n++)t[n]=!0;this.setState({ratings:t})}},{key:"onSelectChange",value:function(e){this.setState({comment:e.target.value})}},{key:"onAddRatingClick",value:function(){var e=this.state.isRating;e=!this.state.isRating,this.setState({isRating:e})}},{key:"onAddRatingChange",value:function(e){this.setState({additionalRating:e.target.value})}},{key:"componentDidUpdate",value:function(e,t,a){var n=99,i=this.props.type;if("breakfast"==i?n=1:"lunch"==i?n=2:"dinner"==i&&(n=3),e.submitDetector!==this.props.submitDetector&&e.submitDetector+n==this.props.submitDetector){var o={meal_name:this.props.name,meal_title:this.props.title,star_rating:this.state.ratings.reduce(function(e,t){return e+t},0).toString(),comment:this.state.comment,additionalRating:this.state.additionalRating};this.props.collect_function(o,this.props.meal_length)}}},{key:"renderAddRatingTextbox",value:function(){var e=this;return this.state.isRating?i.a.createElement("div",{className:"additional-rating"},i.a.createElement(p.a.Control,{as:"textarea",rows:"3",value:this.state.additionalRating,onChange:function(t){e.onAddRatingChange(t)}})):i.a.createElement("div",null)}},{key:"render",value:function(){var e=this;return this.props.user&&!this.props.is_complete?i.a.createElement("div",{class:"inner_rating_style"},i.a.createElement(p.a,null,i.a.createElement("div",{key:"custom-inline-radio",className:"mb-3",style:{marginLeft:10}},i.a.createElement("div",null,i.a.createElement("div",{style:{display:"inline"},className:"stars"},this.renderRating()),i.a.createElement("select",Object(l.a)({className:"select",value:this.state.comment,name:"descriptions",style:{display:"inline",fontSize:20,marginLeft:15,border:"1px solid black"},onChange:function(t){e.onSelectChange(t)}},"className","rating-select"),i.a.createElement("option",{value:"No comment"},"No comment"),i.a.createElement("option",{value:"Perfect!"},"Perfect!"),i.a.createElement("option",{value:"Too salty"},"Too salty"),i.a.createElement("option",{value:"Too sweet"},"Too sweet"),i.a.createElement("option",{value:"Overcooked"},"Overcooked"),i.a.createElement("option",{value:"Undercooked"},"Undercooked"),i.a.createElement("option",{value:"Lacking flavor/spice"},"Lacking flavor/spice"),i.a.createElement("option",{value:"Bitter"},"Bitter")),i.a.createElement("div",null,i.a.createElement(h.a,{className:"add-rating-button",onClick:this.onAddRatingClick},i.a.createElement("p",{className:"add-rating-button-text"},"+ Additional comments"))),this.renderAddRatingTextbox())))):i.a.createElement("div",null)}}]),t}(n.Component),b=a(116),f=a(114),E=a(117),y=a(118),k=a(119),w=(a(73),a(39)),_=a.n(w),R=a(60),x=a.n(R),S=window.CURRENT_HOST+"complete_meal",C=window.CURRENT_HOST+"completed_meals",O=window.CURRENT_HOST+"receive_rating";console.log(window.menu.replace(new RegExp("u&#39;","g"),"").replace(new RegExp("&#39;","g"),""));var T=JSON.parse(window.menu.replace(new RegExp("u&#39;","g"),'"').replace(new RegExp("&#39;","g"),'"'));console.log("menu:"),console.log(T);var j=["breakfast","lunch","dinner"],I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={ratings_input:[],submit_detector:0,ready_to_send:!1,completed:[!0,!0,!0]},a.submitRating=a.submitRating.bind(Object(d.a)(a)),a.collectInputData=a.collectInputData.bind(Object(d.a)(a)),a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;_.a.get(C).then(function(t){var a=e.state.completed;t.data.breakfast||(a[0]=!1),t.data.lunch||(a[1]=!1),t.data.dinner||(a[2]=!1),e.setState({completed:a})})}},{key:"renderSignInButton",value:function(){return window.user_email?i.a.createElement(b.a.Text,null,i.a.createElement("a",{href:"/logout"},i.a.createElement(h.a,{variant:"outline",id:"sign-in-button"},"Sign Out"))):i.a.createElement(b.a.Text,null,i.a.createElement("a",{href:"/auth/google"},i.a.createElement(h.a,{variant:"outline",id:"sign-in-button"},"Sign In")))}},{key:"renderGreeting",value:function(){return window.user_name?i.a.createElement("h1",{className:"greeting"},"Welcome ",window.user_name,", what do you think about Irwin today?"):i.a.createElement("p",{className:"sign-in-prompt"},"You must sign in with an Lville account in order to be able to rate the food.")}},{key:"renderSubmitRating",value:function(e){var t=this,a="";return window.user_email&&!this.state.completed[this.mealToIndex(e)]?a=i.a.createElement(h.a,{onClick:function(){t.submitRating(e)},style:{backgroundColor:"#BA1A26",color:"white",borderColor:"#BA1A26",height:40,width:200,margin:"5px auto"}},i.a.createElement("h5",null,"Submit Rating")):window.user_email&&this.state.completed[this.mealToIndex(e)]&&(a=i.a.createElement("p",{className:"already-rated"},"You have already rated this meal today.")),a}},{key:"mealToIndex",value:function(e){return"breakfast"==e?0:"lunch"==e?1:"dinner"==e?2:void 0}},{key:"submitRating",value:function(e){var t=this;if(this.setState({ratings_input:[]}),this.setState({ready_to_send:!1}),this.state.completed[this.mealToIndex(e)])console.log("Bruh you already rated this!");else{console.log("rating!");var a=this.state.submit_detector,n=0;"breakfast"==e?n=1:"lunch"==e?n=2:"dinner"==e&&(n=3),a+=n,this.setState({submit_detector:a})}_.a.post(S,{user:window.user_email,complete_type:e}).then(function(a){if(console.log(a),alert(a.data),a.data="Rating successful!"){console.log("rating successful! - confirmed");var n=t.state.completed;n[t.mealToIndex(e)]=!0,t.setState({completed:n})}})}},{key:"collectInputData",value:function(e,t){var a=this.state.ratings_input;a.push(e),this.setState({ratings_input:a})}},{key:"componentDidUpdate",value:function(e,t,a){t.ratings_input!=this.state.ratings_input&&(this.state.ratings_input.length>0?(console.log("ready! make request!!"),_.a.post(O,{user_name:window.user_name,user_email:window.user_email,ratings:this.state.ratings_input})):console.log("nope, you can't rate this anymore"))}},{key:"readyToSend",value:function(){this.setState({ready_to_send:!0})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App"},i.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css",integrity:"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T",crossorigin:"anonymous"}),i.a.createElement(b.a,{bg:"light",expand:"lg",color:"red"},i.a.createElement(b.a.Brand,{href:"#home"},i.a.createElement("img",{src:x.a,alt:"website_logo",class:"logo"})),i.a.createElement(b.a.Toggle,{"aria-controls":"basic-navbar-nav"}),i.a.createElement(b.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(f.a,{className:"mr-auto"},i.a.createElement(f.a.Link,{href:"#home"},"Home"),i.a.createElement(f.a.Link,{href:"#link"},"Mission"),i.a.createElement(E.a,{title:"Past Ratings",id:"basic-nav-dropdown"},i.a.createElement(E.a.Item,{href:"#action/3.1"},"Work"),i.a.createElement(E.a.Item,{href:"#action/3.2"},"In"),i.a.createElement(E.a.Item,{href:"#action/3.3"},"Progress"),i.a.createElement(E.a.Divider,null),i.a.createElement(E.a.Item,{href:"#action/3.4"},"Check later"))),this.renderSignInButton())),this.renderGreeting(),j.map(function(t){return console.log(T),console.log(t),i.a.createElement(y.a,{style:{marginLeft:30,marginRight:30,marginTop:30}},i.a.createElement(y.a.Header,{className:"menu-title"},i.a.createElement("h4",{style:{margin:15}},T[t].title)),i.a.createElement(k.a,{variant:"flush"},T[t].items.map(function(a){var n;return i.a.createElement(k.a.Item,{style:{paddingTop:20}},i.a.createElement("div",null,i.a.createElement("h5",{class:"food_title"},a),i.a.createElement(v,(n={title:T[t].title,meal_length:T[t].items.length,name:T[t].name,type:T[t].type,submitDetector:e.state.submit_detector,collect_function:e.collectInputData},Object(l.a)(n,"name",a),Object(l.a)(n,"user",window.user_email),Object(l.a)(n,"is_complete",e.state.completed[e.mealToIndex(T[t].type)]),n))))})),e.renderSubmitRating(T[t].type))}))}}]),t}(n.Component);r.a.render(i.a.createElement(I,null),document.getElementById("root"))},60:function(e,t,a){e.exports=a.p+"static/media/riftlogo1.db9e4b67.png"},66:function(e,t,a){e.exports=a(111)},73:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.ad1f970c.chunk.js.map